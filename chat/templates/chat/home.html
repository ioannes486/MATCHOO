<!DOCTYPE html>
<html>
<head>
  <title>추천 받고 싶은 여행지를 입력하세요!</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div id="chat-window">
    <div id="chat-output"></div>
    <form id="chat-form">
      {% csrf_token %}
      <input type="text" id="chat-input">
      <button type="submit" id="chat-submit">Send</button>
    </form>
  </div>
  <script>
    $(document).ready(function() {
      $('#chat-input').focus();
      $('#chat-form').on('submit', function(event) {
        event.preventDefault();
        var input_text = $('#chat-input').val();
        $('#chat-output').append('<p><strong>You:</strong> ' + input_text + '</p>');
        $('#chat-input').val('');
        $.ajax({
          url: '/chat/generate_text/',
          method: 'POST',
          data: {
            'input_text': input_text,
            'csrfmiddlewaretoken': $('input[name="csrfmiddlewaretoken"]').val()
          },
          success: function(data) {
            var output_text = data.output_text;
            $('#chat-output').append('<p><strong>AI:</strong> ' + output_text + '</p>');
            $('#chat-window').scrollTop($('#chat-window')[0].scrollHeight);
            $('#chat-input').focus();
          }
        });
      });
    });
  </script>
</body>
</html>
